<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SM Mobile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/c2e05c0cf1.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../content/css/index.css">
    <link rel="stylesheet" href="../content/css/details.css">
    <link rel="stylesheet" href="../content/css/login.css">
    <link rel="stylesheet" href="../content/css/cart-so-luong.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="../content/js/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="../content/css/jquery-ui.min.css">
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>
    <script src="../content/js/cart-so-luong.js"></script>
    <link rel="shortcut icon" type="image/png" href="../public/images/modern-flat-mobile-icon-illustration-free-vector.jpg"/>
    <SCript>
        function cong() {
           
            var t=document.getElementById("soLuong").value;
            document.getElementById("soLuong").value=parseInt(t)+1;
           
        }
        function tru() {
            var t=document.getElementById("soLuong").value;
            document.getElementById("soLuong").value=parseInt(t)-1;
            if(t <2){
                document.getElementById("soLuong").value=parseInt(t)+0;
            }
        }
    </SCript>
</head>
<body>
    
    <a href="javascript:void(0);" onclick="myLogin()"><div class="overlay-hide" id="overlay"></div></a>
    <div class="wrapper">

        <!-- <?php require "tai-khoan/dang-nhap-form.php";?> -->
        <header>
            <!-- <?php require "layout/header.php"; ?> -->
            <div class="top-header">
                <div class="inside">
                    <div class="top-header-content">
                    <a href="index.html">
                        <figure class="logo-ifan">
                            <img src="../content\images\products\LOGO-IFAN.png" alt="">
                        </figure>
                    </a>
                    <div class="top-header-right">
                        <div class="top-header-right-item">
                            <img src="../content\images\products\auto1-150x98.png" alt="">
                        </div>
                        <div class="top-header-right-item">
                            <p><i class="fas fa-phone-alt"></i> 19002121</p>
                        </div>
                        <div class="top-header-right-item">
                            <p><i class="fas fa-map-marker-alt"></i>  Địa Chỉ</p>
                        </div>
                        <div class="top-header-right-item">
                            <a href="giohang.html"><i class="fas fa-shopping-bag"></i></a>
                        </div>
                        <div class="top-header-right-item">
                            <a href="javascript:void(0);" onclick="myLogin()"><i class="fas fa-user"></i></a>
                        </div>
                    </div>
                </div>
                </div>
            </div>
            <script>
                function myLogin(){
                var y = document.getElementById("dang-nhap");
                if (y.className =="dang-nhap"){
                y.className +="-show";
                myOverlay();
                }else{
                y.className = "dang-nhap";
                myOverlay();
                }
              }
            </script>
            <!-- <?php require "layout/menu.php"; ?> -->
            <div id="navbar">
                <div class="menu" id="menu">
                    <div class="inside">
                        <ul id="list-category">
                            <li><a href="index.html"><i style="font-size: 24px" class="fab fa-apple"></i></a></li>
                            <!-- <?php
                                require_once "../../dao/loai.php";
                                $loai_array = loai_select_all();
            
                                foreach($loai_array as $loai){
                                    $href="$SITE_URL/san-pham/liet-ke.php?ma_loai=$loai[ma_loai]";
                                    echo "<li><a href='$href'>$loai[ten_loai]</a></li>";
                                }
                            ?> -->
                           
                        </ul>
                    </div>
                </div>
            </div>
        </header>
        <!-- <?php require $VIEW_NAME;?> -->
        <div class="content">
            <div class="inside" id="detail-pro">
        
                
                
               
            </div>
  

            <h2 class="title-ten-loai">Hàng cùng loại</h2>
            <div class="card-list" id="list-products">
                   
                <div class="card">
                    <div class="card-img">
                        <a href="chi-tiet.php?ma_sp=<?= $ma_sp ?>">
                            <img src="../content/images/products/ipSE-2020-white-400x400.png">
                        </a>
                    </div>
                    <div class="card-text">
                        <a href="chi-tiet.php?ma_sp=<?= $ma_sp ?>">
                            <p>iPhone SE</p>
                            <p class="card-gia">Giá từ: 1700000&nbsp;VNĐ</p>
                        </a>
                    </div>
                </div>
                <div class="card">
                    <div class="card-img">
                        <a href="chi-tiet.php?ma_sp=<?= $ma_sp ?>">
                            <img src="../content/images/products/ipSE-2020-white-400x400.png">
                        </a>
                    </div>
                    <div class="card-text">
                        <a href="chi-tiet.php?ma_sp=<?= $ma_sp ?>">
                            <p>iPhone SE</p>
                            <p class="card-gia">Giá từ: 1700000&nbsp;VNĐ</p>
                        </a>
                    </div>
                </div>
                <div class="card">
                    <div class="card-img">
                        <a href="chi-tiet.php?ma_sp=<?= $ma_sp ?>">
                            <img src="../content/images/products/ipSE-2020-white-400x400.png">
                        </a>
                    </div>
                    <div class="card-text">
                        <a href="chi-tiet.php?ma_sp=<?= $ma_sp ?>">
                            <p>iPhone SE</p>
                            <p class="card-gia">Giá từ: 1700000&nbsp;VNĐ</p>
                        </a>
                    </div>
                </div>
                <!-- <?php require "hang-cung-loai.php" ?> -->
            </div>
        </div>
        
          
          
        <!-- <?php require "layout/footer.php";?> -->
        <footer id="footer">
            <div id="top-footer">
                <div class="row">
                    <div class="col">
                        <h4>Thông tin </h4>
                        <div class="contact">
                            <ul>
                                <li> <a href="#">Giới thiệu </a></li>
                                <li> <a href="#">Khuyến mại </a></li>
                                <li> <a href="#">Tuyển dụng </a></li>
                                <li>
                                    <a href="#">Chương trình liên kết</a>
                                </li>
                                <li> <a href="#">Hệ thống của hàng </a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col">
                        <h4>Chính sách </h4>
                        <div class="contact">
                            <ul>
                                <li> <a href="#">Chính sách đổi trả </a></li>
                                <li> <a href="#">Chính sách bảo mật </a></li>
                                <li> <a href="#">Chính sách hoạt động chung </a></li>
                                <li> <a href="#">Chính sách trả góp</a></li>
                                <li> <a href="#">Chính sách bảo hành </a></li>
                                <li> <a href="#">Chính sách Ship – COD </a></li>
                                <li><a href="#">Hướng dẫn Check IMEI </a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col">
                        <h4>Liện hệ </h4>
                        <div class="contact">
                            <ul>
                                <li> <a href="#">Gọi tư vấn mua hàng: <b> 1900.6626</b></a></li>
                                <li> <a href="#">Gọi khiếu nại: <b> 0886.308.688 </b></a></li>
                                <li> <a href="#">Dành cho Doanh nghiệp & Đối tác:<b> 0972.927.907 </b></a></li>
                                <li> <a href="#">Thiết bị của chúng tôi</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col">
                      <div class="contact_inf">
                       <div class="contact__img">
                            <img src="<?=$CONTENT_URL?>/images/products/tich.jpg" alt="">
                       </div>
                       <div class="contact__visa">
                             <img src="<?=$CONTENT_URL?>/images/products/visa.jpg" alt="">
                       </div>
                       <div class="form">
                           <div class="from_Register">
                            <p>Đăng ký nhận tin từ iFanStore</p>  
                           </div>
                            <div class="from_p">
                                <p> Nhận thông tin sản phẩm mới và chương trình khuyến mại của iFanStore</p>
                            </div>
                       </div>
                      </div>
                        <form action="" class="emailform">
                            <input id="input1" type="text" placeholder="Vui lòng nhập địa chỉ Email"><button id="button1" type="submit"><i class="fas fa-paper-plane"></i>&nbsp;Đăng ký</button>
                        </form>
                    </div>
                </div>
            </div>
            <div id="copyrigt">
                <p>© 2022 Công ty CP HHD Việt Nam<br>
    
                    Giấy chứng nhận ĐKDN số 0107465657 do Sở kế hoạch và đầu tư thành phố Hà Nội cấp ngày 08 tháng 06 năm 2021. Địa chỉ: Số 428, Phường Hòa An, Quận Cẩm Lệ, Thành phố Đà Nẵng, Việt Nam<br>
                    Điện thoại: 0247.305.9999.<br>
                    Email: lienhe@iFanStore.com.<br>
                    Đại diện pháp luật: NGUYỄN QUANG HIẾU</p><br>
            </div>
        </footer>
    </div>
    <script>
    function myOverlay(){
    var y = document.getElementById("overlay");
    if (y.className =="overlay-hide"){
    y.className ="overlay";
    }else{
    y.className = "overlay-hide";
    }
    }
    
    </script>
    <script>
        window.onscroll = function() {myFunction()};

        var navbar = document.getElementById("navbar");
        var sticky = navbar.offsetTop;

        function myFunction() {
        if (window.pageYOffset >= sticky) {
            navbar.classList.add("sticky")
        } else {
            navbar.classList.remove("sticky");
        }
    }
    </script>
    <script src="../public/js/jquery-3.6.0.min.js">
        
    </script>
    <script>
        //Get categorary
        var url="http://localhost:3000/category";
        fetch(url).then(data=> data.json())
        .then(category=>{
            cat_arr=category.map(cat=>{
                return `<li><a href="listByCat.html?id=${cat.id}">${cat.name}</a></li>`
            })
            cat_arr.push(`<li><a href="">Phụ kiện</a></li>
                            <li><a href="">Dịch vụ</a></li>
                            <li><a href="">Khuyến mại</a></li>
                            <li><a href="">Giới thiệu</a></li>
                            <li>
                                <form action="<?=$SITE_URL?>/san-pham/liet-ke.php">
                                    <input class="input-search" type="text" placeholder="Bạn muốn mua gì?" name="keyword">
                                    <button class="submit-search" type="submit"><i class="fa fa-search"></i></button>
                                </form>
            
                            </li>`);
            document.querySelector('#list-category').innerHTML+=cat_arr;
            
        });
    </script>
    <script>
        var urlPro="http://localhost:3000/products";
        const urlParams = new URLSearchParams(window.location.search);
        id = urlParams.get('id');
        console.log(id);
        var urlDetailPro = urlPro + "/" + id;
    fetch(urlDetailPro)
        .then(res => res.json())
        .then(data => {
                var strContent = `
                <div class="details">
                    <section class="details-box-img">
                        <figure class="box-img">
                            <img src='../public/images/products/${data.image}' >
                        </figure>
                    </section>
                    <section class="details-box-info">
                        <div class="info-details">
                            <h2 class="title-product">${data.name}</h2>
                            <div class="gach-ngang"></div>
                            <div class="memory">
                                <p class="details-text"> Chọn dung lượng:<span> 128GB</span></p>
                                <div class="memory-list">
                                    <span>1TB</span>
                                    <span>256GB</span>
                                    <span>512GB</span>
                                    <span>128GB</span>
                                </div>
                            </div>
                            <div class="luotxem-ngaynhap">
                                <p class="details-text">Ngày nhập: <span>02-02-2022</span></p>
                                <p class="details-text">Số lượt xem: <span>9 <i class="far fa-eye"></i></span></p>
                                <p class="details-text">Tình Trạng: <span>90</span></p>
                                <del class="details-text" style="color: gray;">Giá cũ: 2500000 VNĐ</del>
                                <p class="details-text">Giảm giá: <span>2%</span></p>
                                240000đ
                            </div>
                            <div class="gach-ngang1"></div>
                            <div class="details-gia">
                                <p class="details-text">Giá bán: ${data.price}</p>
                            </div>
                            <div class="add">
                               
                                    <input type="hidden" id="cate_id" name="ma_sp" value="${data.cate_id}">
                                    <input type="hidden" name="ten_sp" value="<?= $ten_sp?>">
                                    <input type="hidden" name="hinh" value="<?=$hinh?>">
                                    <input type="hidden" name="gia_sp" value="<?php echo $gia_sp ?>">
                                    <div class="buttons_added">
                                        <input class="minus is-form" type="button" value="-" onclick="tru()">
                                        <input readonly aria-label="quantity" class="input-qty" max="10" min="1" name="so_luong" id="soLuong" type="number" value="1">
                                        <input class="plus is-form" type="button" value="+" onclick="cong()">
                                    </div>
                                   
                                    <a href="#"><button class='btn-add' onclick="addCart(${data.id},'${data.name}',${data.price},'${data.image}')">Thêm vào giỏ hàng</button><a/>
                              
                              
                                
                            </div>
                        </div>
                    </section>
                </div>
                <div class="tabset">
                <!-- Tab 1 -->
                <input type="radio" name="tabset" id="tab1" aria-controls="marzen" checked>
                <label for="tab1">Mô tả</label>
                <!-- Tab 2 -->
                <input type="radio" name="tabset" id="tab2" aria-controls="rauchbier">
                <label for="tab2">Thông tin bổ sung </label>
                <!-- Tab 3 -->
                <input type="radio" name="tabset" id="tab3" aria-controls="dunkles">
                <label for="tab3">Hỏi đáp</label>
        
                <div class="tab-panels">
                    <section id="marzen" class="tab-panel">
                        <h2>Mô Tả</h2>
                        <p>${data.detail}</p>
           
                    </section>
                    <section id="rauchbier" class="tab-panel">
                        <h2>Đại lý ủy quyền Apple (Apple Authorized Reseller) là gì?</h2>
                        <p><strong></strong> Đại lý uỷ quyền Apple – Apple Authorised Reseller là đơn vị ủy quyền của Apple,
                            cung cấp đến người dùng các sản phẩm phần cứng, phần mềm chính hãng Apple.</p>
                        <p><strong></strong> Để trở thành một Apple Authorised Reseller (AAR), đơn vị kinh doanh phải đáp ứng đủ
                            một vài yêu cầu khắt khe của Apple về: dịch vụ kinh doanh, dịch vụ chăm sóc khhàng, vị trí đặt cửa
                            hàng,… và đặc biệt phải đáp ứng đủ yêu cầu về doanh số bán sản phẩm Apple chính hãng trong một năm.
                        </p>
                    </section>
                    <section id="dunkles" class="tab-panel">
                        <h2>Hỏi đáp</h2>
                        <strong>iPhone 13 pro giá bao nhiêu?</strong><br>
                        <p><strong>iPhone 13 pro có mấy màu? Dung lượng iPhone 13 pro là bao nhiêu?<br>
                            </strong> iPhone 13 pro hiện có giá dự kiến thấp nhất là 29.290.000đ với phiên bản 128BGB, giá
                            32.290.000đ với phiên bản 256GB, giá 38.790.000đ với phiên bản 512GB, và phiên bản iPhone 13 Pro 1TB
                            có giá 43.790.000đ</p>
                        <p><strong></strong> iPhone 13 pro có 4 màu: màu Graphite, Silver, Gold, Blue. iPhone 13 pro bao gồm các
                            dung lượng 128GB, 256GB, 512GB và đặc biệt bản iPhone 13 Pro 1TB lần đầu xuất hiện</p>
                        <strong>iPhone 13 pro khi nào ra mắt? Khi nào bán iPhone 13 Pro?</strong>
                        <p>iPhone 13 Pro chính thức được Apple giới thiệu vào ngày 15/09/2021. Tại Việt Nam, iPhone 13 pro được
                            ShopDunk bán vào ngày 22/10/2021, quý khách có thể đăng ký tại các kênh của ShopDunk để trở thành
                            người sở hữu iPhone 13 pro chính hãng sớm nhất tại Việt Nam. ShopDunk chính thức nhận đặt cọc từ
                            ngày 15/10/2021.</p>
                           
                    </section>
                </div>
                `;
                
                document.querySelector('#detail-pro').innerHTML += strContent;
            }
        )
    </script>
    <script>
        
    async function addCart(ma, ten, gia, hinh) {
    // Lấy dữ liệu cart
    let cart = localStorage.getItem("cart");
    if (cart == null) {
        cart = [];
        
    } else {
        // Chuyển cart về file Json
        cart = JSON.parse(cart);
    }
    var soLuong=document.getElementById('soLuong').value;
    // Check id đã tồn tại trong local Storage
    let existed = cart.map(o => o.id).indexOf(ma);
    if (existed == -1) {
        cart.push({id:ma, name:ten, price:gia, image:hinh, quantity:soLuong});
        localStorage.setItem("cart", JSON.stringify(cart));
    } else {
        cart[existed].quantity = Number(cart[existed].quantity)+ Number(soLuong);
        localStorage.setItem("cart", JSON.stringify(cart));
    }
    alert("Thêm vào giỏ hàng thành công!");
}
        
    </script>
    <script>
        var urlPro="http://localhost:3000/products";
        var idCate=document.getElementById('cate_id').value;
        var urlRelatedPro = urlPro + "?cate_id=" + idCate;
        fetch(urlRelatedPro).then(data=> data.json())
        .then(products=>{
            products.forEach(sp=>{
                document.querySelector('#list-products').innerHTML+=`
                <div class="card">
                      <div class="card-img">
                      <a href="detail.html?id=${sp.id}">
                          <img src="../public/images/products/${sp.image}" style="width: 250px; height: 250px">
                      </a>
                      </div>
                      <div class="card-text">
                      <a href="detail.html?id=${sp.id}">
                          <p>${sp.name}</p>
                          <p class="card-gia">Giá từ: ${sp.price} VNĐ</p>
                      </a>
                      </div>
                  </div>`;
            })
            
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</body>